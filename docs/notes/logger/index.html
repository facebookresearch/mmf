<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="MMF Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="MMF Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-135079836-3","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135079836-3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-135079836-3",{})</script><title data-react-helmet="true">Weights and Biases Logging | MMF</title><meta data-react-helmet="true" property="og:image" content="https://mmf.sh/img/logo.png"><meta data-react-helmet="true" name="twitter:image" content="https://mmf.sh/img/logo.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for MMF"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Weights and Biases Logging | MMF"><meta data-react-helmet="true" name="description" content="Weights and Biases Logger"><meta data-react-helmet="true" property="og:description" content="Weights and Biases Logger"><meta data-react-helmet="true" property="og:url" content="https://mmf.sh/docs/notes/logger"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://mmf.sh/docs/notes/logger"><link rel="stylesheet" href="/styles.5679a759.css">
<link rel="preload" href="/styles.62c321e4.js" as="script">
<link rel="preload" href="/runtime~main.a380ec61.js" as="script">
<link rel="preload" href="/main.09abb6e5.js" as="script">
<link rel="preload" href="/1.5a7cbee8.js" as="script">
<link rel="preload" href="/2.1aac0ddb.js" as="script">
<link rel="preload" href="/38.5955bbfd.js" as="script">
<link rel="preload" href="/39.47a2b510.js" as="script">
<link rel="preload" href="/935f2afb.c9961d81.js" as="script">
<link rel="preload" href="/17896441.c02556e4.js" as="script">
<link rel="preload" href="/2acef975.4970037b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/banner_logo.svg" alt="MMF Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/banner_logo.svg" alt="MMF Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/api_redirect">API</a><a href="https://github.com/facebookresearch/mmf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/banner_logo.svg" alt="MMF Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/banner_logo.svg" alt="MMF Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/api_redirect">API</a></li><li class="menu__list-item"><a href="https://github.com/facebookresearch/mmf" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Weights and Biases Logging</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="weights-and-biases-logger"></a>Weights and Biases Logger<a class="hash-link" href="#weights-and-biases-logger" title="Direct link to heading">#</a></h2><p>MMF now has a <code>WandbLogger</code> class which lets the user to log their model&#x27;s progress using <a href="https://wandb.ai/site" target="_blank" rel="noopener noreferrer">Weights and Biases</a>. Enable this logger to automatically log the training/validation metrics, system (GPU and CPU) metrics and configuration parameters.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="first-time-setup"></a>First time setup<a class="hash-link" href="#first-time-setup" title="Direct link to heading">#</a></h2><p>To set up wandb, run the following:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pip install wandb</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In order to log anything to the W&amp;B server you need to authenticate the machine with W&amp;B <strong>API key</strong>. You can create a new account by going to <a href="https://wandb.ai/signup" target="_blank" rel="noopener noreferrer">https://wandb.ai/signup</a> which will generate an API key. If you are an existing user you can retrieve your key from <a href="https://wandb.ai/authorize" target="_blank" rel="noopener noreferrer">https://wandb.ai/authorize</a>. You only need to supply your key once, and then it is remembered on the same device.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">wandb login</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="wb-config-parameters"></a>W&amp;B config parameters<a class="hash-link" href="#wb-config-parameters" title="Direct link to heading">#</a></h2><p>The following options are available in config to enable and customize the wandb logging:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">training</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Weights and Biases control, by default Weights and Biases (wandb) is disabled</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">wandb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Whether to use Weights and Biases Logger, (Default: false)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># An entity is a username or team name where you&#x27;re sending runs.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This is necessary if you want to log your metrics to a team account. By default</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># it will log the run to your user account.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">entity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Project name to be used while logging the experiment with wandb</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">project</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mmf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Experiment/ run name to be used while logging the experiment</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># under the project with wandb</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">training.experiment_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Specify other argument values that you want to pass to wandb.init(). Check out the documentation</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># at https://docs.wandb.ai/ref/python/init to see what arguments are available.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># job_type: &#x27;train&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># tags: [&#x27;tag1&#x27;, &#x27;tag2&#x27;]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">wandb_logdir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">MMF_WANDB_LOGDIR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li><p>To enable wandb logger the user needs to change the following option in the config.</p><p>  <code>training.wandb.enabled=True</code></p></li><li><p>To give the <code>entity</code> which is the name of the team or the username, the user needs to change the following option in the config. In case no <code>entity</code> is provided, the data will be logged to the <code>entity</code> set as default in the user&#x27;s settings.</p><p>  <code>training.wandb.entity=&lt;teamname/username&gt;</code></p></li><li><p>To give the current experiment a project and run name, user should add these config options. The default project name is <code>mmf</code> and the default run name is <code>${training.experiment_name}</code>.</p><p>  <code>training.wandb.project=&lt;ProjectName&gt;</code> <br>
<code>training.wandb.name=&lt;RunName&gt;</code></p></li><li><p>To change the path to the directory where wandb metadata would be stored (Default: <code>env.log_dir</code>):</p><p>  <code>env.wandb_logdir=&lt;dir_name&gt;</code></p></li><li><p>To provide extra arguments to <code>wandb.init()</code>, the user just needs to define them in the config file. Check out the documentation at <a href="https://docs.wandb.ai/ref/python/init" target="_blank" rel="noopener noreferrer">https://docs.wandb.ai/ref/python/init</a> to see what arguments are available. An example is shown in the config parameter shown above. Make sure to use the same key name in the config file as defined in the documentation.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="current-features"></a>Current features<a class="hash-link" href="#current-features" title="Direct link to heading">#</a></h2><p>The following features are currently supported by the <code>WandbLogger</code>:</p><ul><li>Training &amp; Validation metrics</li><li>Learning Rate over time</li><li>GPU: Type, GPU Utilization, power, temperature, CUDA memory usage</li><li>Log configuration parameters</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebookresearch/mmf/edit/main/website/docs/notes/logging.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-11-23T18:00:14.000Z" class="docLastUpdatedAt_1Qna">11/23/2021</time> by <strong>Ayush Thakur</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#weights-and-biases-logger" class="table-of-contents__link">Weights and Biases Logger</a></li><li><a href="#first-time-setup" class="table-of-contents__link">First time setup</a></li><li><a href="#wb-config-parameters" class="table-of-contents__link">W&amp;B config parameters</a></li><li><a href="#current-features" class="table-of-contents__link">Current features</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/pytorch/bootstrapping-a-multimodal-project-using-mmf-a-pytorch-powered-multimodal-framework-464f75164af7" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/facebookresearch/mmf" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_31Aa"><img class="footer__logo" alt="Facebook Open Source Logo" src="/img/oss_logo.png"></a></div><div class="footer__copyright">Copyright Â© 2021 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.62c321e4.js"></script>
<script src="/runtime~main.a380ec61.js"></script>
<script src="/main.09abb6e5.js"></script>
<script src="/1.5a7cbee8.js"></script>
<script src="/2.1aac0ddb.js"></script>
<script src="/38.5955bbfd.js"></script>
<script src="/39.47a2b510.js"></script>
<script src="/935f2afb.c9961d81.js"></script>
<script src="/17896441.c02556e4.js"></script>
<script src="/2acef975.4970037b.js"></script>
</body>
</html>